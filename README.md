_Slide 0_<br>
こんにちは。今夜は、Vue.js向けの公式単体テストライブラリについて話させて頂きます。
<br>
<br>
<br>
<br>
<br>
<br>
<br>
_Slide 1_<br>
それについて話す前に、
- コンポーネントというものは何か
- なぜテストするか
- テストするとき、何をテストするか
について話したいと思います。
<br>
<br>
<br>
<br>
_Slide 2_<br>
- Vueのコンポーネントを組み合わせて、ユーザーインタフェイスを構築できます。
- コンポーネントは、ユーザーインタフェースの一つの部分だと言えます。
- コンポーネントは二つのことをします。
- データをユーザーに表示すること
- ユーザーにアプリケーションと対話できるようにすること。
<br>
<br>
<br>
<br>
_Slide 3_<br>
- そこで、コンポーネントをテストするときは、これら二つについてテストすべきです。  
<br>**Button**<br> 
- コンポーネントはデータをユーザーに正しく表示しますか  
<br>**Button**<br>
- コンポーネントはユーザーにアプリケーションと対話できるようにしますか
<br>
**これはvue-test-utilsができることです。**
<br>
<br>
_Slide 4_<br>
- vue-test-utilsは、Vueコンポーネントをテストするための公式ライブラリです 
- Reactのreact-test-utils,Enzymeのようなライブラリです 
- Vue, Vuex, Vue Routerと同じように、日本語のドキュメントも提供してあります 
<br>
<br>
<br>
<br>
<br>
<br>
_Slide 5_<br>
- vue-test-utilsはこのようなことをするためにツールを提供します:
<br>
- コンポーネントをレンダリングし、そしてマークアップする
- コンポーネントの値(状態)/関数を設定する
- コンポーネントのユーザーインタラクションをシュミレーションする
- プロパティをモックする
<br>
これらのメソッドについて、いくつか簡単なデモを見ていきましょう 
<br>
Hello.vue<br>  
- このコンポーネントは一番簡単なコンポーネントです 
- ただテキストを表示します 
<br>
- shallowというメソッドをそのコンポーネントを隔離してレンダリングして、マークアップを検証します 
- `shallow`という関数は基本的なメソッドで、コンポーネントテストにほとんど全部使います 
- この例でコンポーネントをレンダーして、マークアップを検証します 
<br>
次の例に行きましょう。
<br>
<br>
<br>
<br>
<br>
<br>
SetData.vue<br>
- setDataというメソッドがあります。
- setDataでコンポーネントのdata関数を簡単に更新できます。
<br>
- また、`setMethods`, `setComputed`,`setProps`などのメソッドがあるため、 
- 簡単にデータを正しく表示するのを検証できます 
- この例では、変数を更新して、マークアップが正しく更新されたのを検証します 
<br>
**ユーザーインタラクションはどうやってテストするのでしょうか？**<br>
<br>
<br>
<br>
<br>
<br>
<br>
Trigger.vue<br>
- vue-test-utilsのtriggerというメソッドを使って、
- インタラクションをシミュレーションして、
- コンポーネントにイベントを発火できます。
<br>
- この例では、バタンを検索して,triggerでユーザーがボタンを押すシミュレーションして、
- マークアップが更新されたのを検証します。
- <br>
- これまでのところ、全てのこれらのコンポーネントは簡単でした。
- もう少し興味を持つ複雑な例についてはどうでしょうか？
<br>
**４番目のコンポーネントは、Vuexストアも使っています**<br>
<br>
<br>
<br>
Mock.vue<br>
ここでの例では、いくつかの事が起こっています:
- テキストボックスに入力するとき、ミューテーションをコミットします 
- $store.state.color によってテキストボックスの色が変わります 
- テストするところが二つあります。
<br>
- 最初にボーダーの色スタイルを更新するのをテストしましょう。
- Vuexストアを使うとテストはもっとややこしくなります。
- vue-test-utilsではもっといい方法があります。
<br>
- vuexストアのようなグローバルプロパティに注入するために、
- モックオブジェクトを使用できます。
<br>
- mockオブジェクトを使用して、
- ストアを好きなように設定できます。
<br>
- それから、簡単にhasStyleを使用して検証できます。
- この検証で、ボーダーの色をストアの状態によって正しく設定するのを確認します。
<br>
この例では、ユーザーインタラクションがないのでモックストアを使いました。
<br>
次のテストを見て行きましょう。
<br>
<br>
<br>
- インタラクションをテストすると、
- モックストアではなく本当のVuexストアを使用した方がいいです。
<br>
- ユーザーが色を入力するとき、
- SET_COLORミューテーションは正しいペイロードによって
- コミットされるべきです。
<br>
- inputを探して、
- テキストを入力して、そして
- inputをシミュレーションするためにtriggerを使用します。
<br>
- ミューテーションをコミットしたことと、
- ペイロードが正しいことを検証します。
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
_Slide 6_<br>
- 最後に、vue-test-utilsはまだベータです。
- オーペンスーソに貢献するいいチャンスです。
<br>
- まだ追加していないフィーターとバグがあるし、
- どんどんあたらしいフィーターを追加してきたので、
- ドキュメントが古くなります
<br>
- オーペンソースに貢献する経験のない人に簡単な最初の一歩だと思います。
- 貢献したい方は連絡してください。
<br>
